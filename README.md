# litesearch


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->

This file will become your README and also the index of your
documentation.

## Developer Guide

If you are new to using `nbdev` here are some useful pointers to get you
started.

### Install litesearch in Development mode

``` sh
# make sure litesearch package is installed in development mode
$ pip install -e .

# make changes under nbs/ directory
# ...

# compile to have changes apply to litesearch
$ nbdev_prepare
```

## Usage

### Installation

Install latest from the GitHub
[repository](https://github.com/Karthik777/litesearch):

``` sh
$ pip install git+https://github.com/Karthik777/litesearch.git
```

or from [conda](https://anaconda.org/Karthik777/litesearch)

``` sh
$ conda install -c Karthik777 litesearch
```

or from [pypi](https://pypi.org/project/litesearch/)

``` sh
$ pip install litesearch
```

### Documentation

Documentation can be found hosted on this GitHub
[repository](https://github.com/Karthik777/litesearch)’s
[pages](https://Karthik777.github.io/litesearch/). Additionally you can
find package manager specific guidelines on
[conda](https://anaconda.org/Karthik777/litesearch) and
[pypi](https://pypi.org/project/litesearch/) respectively.

Let’s setup some deps to make full use of litesearch

``` python
from fastcore.all import *
from fastlite import *
import numpy as np
from litesearch import *
```

Let’s set the db up. This db has usearch loaded. So, you can run cosine
distance calculations using simd(means fast, real fast)

``` python
db: Database = setup_db(':memory:')
db.q('select distance_cosine_f16(:vec1,:vec2)',
     dict(vec1=np.ones(512, np.float16).tobytes(), vec2=np.zeros(512, np.float16).tobytes()))
```

    [{'distance_cosine_f16(:vec1,:vec2)': 1.0}]

There are way more functions you can run now. Checkout:
https://unum-cloud.github.io/USearch/sqlite/index.html

Checkout the `examples/01_simple_rag.ipynb` for a full-fledged rag
example.

Let’s create a store and push some content in.

``` python
store = db.mk_store()
```

``` python
store.schema
```

    'CREATE TABLE [content] (\n   [id] INTEGER PRIMARY KEY,\n   [content] TEXT NOT NULL,\n   [embedding] BLOB,\n   [metadata] TEXT,\n   [uploaded_at] FLOAT DEFAULT CURRENT_TIMESTAMP\n)'

``` python
store.insert_all([
    dict(content=c, embedding=np.full(512, i)) for i, c in enumerate(['this is a text', "I'm hungry", "Let's play! shall we?"])
    ])
```

    <Table content (id, content, embedding, metadata, uploaded_at)>

Cool, let’s search through these contents

#### litesearch provides a search method which reranks the results from both FTS and vector search using Reciprocal Rank Fusion (RRF)

> You can always turn it off.

``` python
q,e='playing hungry',np.full(512,1).tobytes()
res = db.search(pre(q), e, columns=['id', 'content'], lim=2)
print(res)
```

    [{'id': 2, 'content': "I'm hungry"}, {'id': 3, 'content': "Let's play! shall we?"}, {'id': 1, 'content': 'this is a text'}]
